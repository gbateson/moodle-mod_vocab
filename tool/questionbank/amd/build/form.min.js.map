{"version":3,"file":"form.min.js","sources":["../src/form.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * mod/vocab/tool/definelist/amd/src/form.js\n *\n * @module     block_ungraded_activities\n * @copyright  2023 Gordon Bateson (gordon.bateson@gmail.com)\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @since      Moodle 3.11\n */\n\ndefine([], function(){\n\n    var JS = {};\n\n    JS.add_event_listener = function(obj, evt, fn, useCapture) {\n        if (obj.addEventListener) {\n            obj.addEventListener(evt, fn, (useCapture || false));\n        } else if (obj.attachEvent) {\n            obj.attachEvent('on' + evt, fn);\n        }\n    };\n\n    /*\n     * initialize this AMD module\n     */\n    JS.init = function() {\n\n        // Expand the textarea to accommodate any newly entered text.\n        const textarea = document.getElementById('id_addwordselements_addwords');\n        if (textarea) {\n            JS.add_event_listener(textarea, 'input', function(){\n                this.style.height = 'auto'; // '1px' also works\n                this.style.height = (this.scrollHeight + 6) + 'px';\n            });\n            if (textarea.scrollHeight) {\n                textarea.dispatchEvent(new Event('input'));\n            } else {\n                // Element is hidden, so trigger this event\n                // handler when the element becomes visible.\n                JS.trigger_on_toggle(textarea, 500, 'input');\n            }\n        }\n\n        // Position the button at the bottom of the textarea\n        const btn = document.getElementById('id_addwordselements_addwordsbutton');\n        if (btn) {\n            btn.closest(\".fitem\").style.setProperty('align-self', 'end');\n        }\n\n        // Expand the text box to accommodate any newly entered text.\n        const input = document.getElementById('id_exportfileelements_exportfile');\n        if (input) {\n            JS.add_event_listener(input, 'input', function(){\n                this.style.width = 'auto'; // '1px' also works\n                this.style.width = (this.scrollWidth + 6) + 'px';\n            });\n            if (input.scrollWidth) {\n                input.dispatchEvent(new Event('input'));\n            } else {\n                // Element is hidden, so trigger this event\n                // handler when the element becomes visible.\n                JS.trigger_on_toggle(input, 500, 'input');\n            }\n        }\n    };\n\n    /**\n     * trigger_on_toggle\n     *\n     * @param {object} elm\n     * @param {integer} delay\n     * @param {string} eventType\n     */\n    JS.trigger_on_toggle = function(elm, delay, eventType) {\n        const fieldset = elm.closest(\"fieldset.collapsible.collapsed\");\n        if (fieldset) {\n            const toggler = fieldset.querySelector('.ftoggler');\n            if (toggler) {\n                JS.add_event_listener(toggler, 'click', function(){\n                    setTimeout(function(){\n                        elm.dispatchEvent(new Event(eventType));\n                    }, delay);\n                });\n            }\n        }\n\n    };\n\n    return JS;\n});"],"names":["define","JS","obj","evt","fn","useCapture","addEventListener","attachEvent","textarea","document","getElementById","add_event_listener","this","style","height","scrollHeight","dispatchEvent","Event","trigger_on_toggle","btn","closest","setProperty","input","width","scrollWidth","elm","delay","eventType","fieldset","toggler","querySelector","setTimeout"],"mappings":";;;;;;;;AAwBAA,mCAAO,IAAI,WAEP,IAAIC,GAAK,CAETA,mBAAwB,SAASC,IAAKC,IAAKC,GAAIC,YACvCH,IAAII,iBACJJ,IAAII,iBAAiBH,IAAKC,GAAKC,aAAc,GACtCH,IAAIK,aACXL,IAAIK,YAAY,KAAOJ,IAAKC,KAOpCH,KAAU,WAGN,MAAMO,SAAWC,SAASC,eAAe,gCACrCF,WACAP,GAAGU,mBAAmBH,SAAU,SAAS,WACrCI,KAAKC,MAAMC,OAAS,OACpBF,KAAKC,MAAMC,OAAUF,KAAKG,aAAe,EAAK,QAE9CP,SAASO,aACTP,SAASQ,cAAc,IAAIC,MAAM,UAIjChB,GAAGiB,kBAAkBV,SAAU,IAAK,UAK5C,MAAMW,IAAMV,SAASC,eAAe,sCAChCS,KACAA,IAAIC,QAAQ,UAAUP,MAAMQ,YAAY,aAAc,OAI1D,MAAMC,MAAQb,SAASC,eAAe,oCAClCY,QACArB,GAAGU,mBAAmBW,MAAO,SAAS,WAClCV,KAAKC,MAAMU,MAAQ,OACnBX,KAAKC,MAAMU,MAASX,KAAKY,YAAc,EAAK,QAE5CF,MAAME,YACNF,MAAMN,cAAc,IAAIC,MAAM,UAI9BhB,GAAGiB,kBAAkBI,MAAO,IAAK,WAY7CrB,kBAAuB,SAASwB,IAAKC,MAAOC,WACxC,MAAMC,SAAWH,IAAIL,QAAQ,kCAC7B,GAAIQ,SAAU,CACV,MAAMC,QAAUD,SAASE,cAAc,aACnCD,SACA5B,GAAGU,mBAAmBkB,QAAS,SAAS,WACpCE,YAAW,WACPN,IAAIT,cAAc,IAAIC,MAAMU,cAC7BD,aAOnB,OAAOzB,EACX"}