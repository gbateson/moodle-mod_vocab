/**
 * mod/vocab/tool/wordlist/amd/src/form.js
 *
 * @module     block_ungraded_activities
 * @copyright  2023 Gordon Bateson (gordon.bateson@gmail.com)
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 * @since      Moodle 3.11
 */
define("vocabtool_wordlist/form",[],(function(){var JS={SELECTALL_SELECTOR:"input[type=checkbox][name^='wordlist[0]']",CHECKBOX_SELECTOR:"input[type=checkbox][name^='wordlist']:not([name='wordlist[0]'])",ACTION_SELECTOR:"select[name='wordlist[wordlistaction]']",BUTTON_SELECTOR:"input[type=submit][name='wordlist[wordlistbutton]']",add_event_listener:function(obj,evt,fn,useCapture){obj.addEventListener?obj.addEventListener(evt,fn,useCapture||!1):obj.attachEvent&&obj.attachEvent("on"+evt,fn)},init:function(){JS.setup_selectall(),JS.setup_checkboxes(),JS.setup_wordlistaction()},setup_selectall:function(){const selectall=document.querySelector(JS.SELECTALL_SELECTOR);selectall&&(JS.set_selectall_wordtext(selectall),JS.add_event_listener(selectall,"click",JS.onclick_selectall))},onclick_selectall:function(){const selectall=this;JS.set_selectall_wordtext(selectall),document.querySelectorAll(JS.CHECKBOX_SELECTOR).forEach((function(cb){cb.checked=selectall.checked})),JS.set_wordlistaction()},set_selectall_wordtext:function(selectall){const checked=selectall.checked,dataset=selectall.dataset,text=checked?dataset.deselectall:dataset.selectall,wordtext=selectall.closest("label").querySelector(".wordtext");wordtext&&(wordtext.innerHTML=text)},setup_checkboxes:function(){document.querySelectorAll(JS.CHECKBOX_SELECTOR).forEach((function(cb){JS.add_event_listener(cb,"click",JS.set_wordlistaction)}))},setup_wordlistaction:function(){const wordlistaction=document.querySelector(JS.ACTION_SELECTOR);wordlistaction&&(JS.add_event_listener(wordlistaction,"change",JS.set_wordlistbutton),JS.set_wordlistaction())},set_wordlistaction:function(){let count=0;document.querySelectorAll(JS.CHECKBOX_SELECTOR).forEach((function(cb){cb.checked&&count++}));const wordlistaction=document.querySelector(JS.ACTION_SELECTOR);wordlistaction&&(count?wordlistaction.removeAttribute("disabled"):wordlistaction.setAttribute("disabled","disabled"),JS.set_wordlistbutton())},set_wordlistbutton:function(){const wordlistaction=document.querySelector(JS.ACTION_SELECTOR),wordlistbutton=document.querySelector(JS.BUTTON_SELECTOR);wordlistaction&&wordlistbutton&&(wordlistaction.getAttribute("disabled")||wordlistaction.selectedIndex<1?wordlistbutton.setAttribute("disabled","disabled"):wordlistbutton.removeAttribute("disabled"))}};return JS}));

//# sourceMappingURL=form.min.js.map